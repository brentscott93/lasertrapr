---
title: "lasertrapr"
output: 
  flexdashboard::flex_dashboard:
    orientation: rows
    vertical_layout: fill
    logo: "`r system.file('app/www/lasertrapr-logo-small.ico', package = 'lasertrapr')`"
editor_options: 
  chunk_output_type: inline
params: 
  rv: NA
  
---

```{r setup, include=FALSE}
library(flexdashboard)
#library(biophysr)
library(lasertrapr)
#library(aomisc)
#devtools::install_github("onofriAndreaPG/aomisc")
library(tidyverse)
library(cowplot)
library(ggpubr)
library(DT)
#library(plotly)

```
    
Summary Table
=====================================  
Row 
-------------------------------------
    
### Summary Table
    
```{r, fig.width=14, fig.height=21}
   params$rv$data$summary %>% 
  dplyr::mutate(across(where(is.numeric), round, digits = 1)) %>% 
     dplyr::select( "Conditions" = conditions,
                    "Step Size (nm)" = displacement_avg,
                    "SE Step" = displacement_se,
                    "Force (pN)" = force_avg,
                    "SE Force" = force_se, 
                    "Time On (ms)" = time_on_avg,
                    "SE Ton" = time_on_se, 
                    'Median Time-on' = time_on_median,
                    "Time Off (ms)" = time_off_avg,
                    "SE Toff" = time_off_se, 
                    "No. Events" = num_events,
                    "Minutes Collected" = minutes ) %>% 
    dplyr::arrange(Conditions) %>% 
    DT::datatable(
              extensions = 'FixedColumns',
              options = list(
                dom = 't',
                scrollX = TRUE,
                fixedColumns = list(leftColumns = 2)
              )
    )
```
 
Stats
=====================================  

Row {.tabset .tabset-fade}
-------------------------------------
    
### Step Size
    
```{r, fig.height = 8, fig.width=14}
params$rv$step
```
    
### Force

```{r, fig.height = 8, fig.width=14}
 params$rv$force
```


### Time On

```{r, fig.height = 8, fig.width=14}
 params$rv$ton
```


### Time Off

```{r, fig.height = 8, fig.width=14}
 params$rv$toff
```

ECDF
=============================
```{r}
params$rv$ton_survival
```


Correlations
==============================
```{r}
params$rv$correlations
```

Stiffness
==============================
```{r}
params$rv$stiffness
```

